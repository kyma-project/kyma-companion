id: test-apirule-7 # format: test-<resource_kind>-<test_id>
description: The application uses an APIRule that has two accessStrategies handler, which will lead to an error instead.
queries:
  - user_query: Why is the APIRule status showing ERROR?
    resource:
      kind: APIRule
      api_version: gateway.kyma-project.io/v1beta1
      name: restapi
      namespace: test-apirule-7 # format: test-<resource_kind>-<test_id>
    expectations:
      - name: apirule_error
        statement: points out that the APIRule is in an error state
        threshold: 0.5
        critical: true
      - name: apirule_with_two_accessStrategies
        statement: points out that the APIRule has two accessStrategies but should only have one
        threshold: 0.5
        critical: true
      - name: step_by_step_guide
        statement: contains a step-by-step guide
        threshold: 0.5
        critical: true
      - name: some_yaml
        statement: provides some yaml formatted code
        threshold: 0.5
        critical: true
      - name: partial_yaml_for_apirule
        statement: provides some yaml formatted manifest for an APIRule that only contains one accessStrategy
        threshold: 0.5
        critical: true
      - name: complete_yaml_for_apirule
        statement: provides a complete yaml formatted manifest for an APIRule, that contains all required fields and that only contains one accessStrategy
        threshold: 0.5
        critical: true
      - name: deployable_yaml_for_apirule
        statement: provides a complete yaml formatted manifest for a APIRule, with the name set to 'restapi', the namespace set to 'test-apirule-7', that contains all required fields and that contains only one accessStrategy
        threshold: 0.5
        critical: true
