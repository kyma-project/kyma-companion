description: The Function has a syntax error in its JavaScript source code.
providers:
- id: file://./src/companion_provider.js
  config:
    apiUrl: ${COMPANION_API_URL}
    resource:
      kind: Function
      api_version: serverless.kyma-project.io/v1alpha2
      name: my-function-0
      namespace: test-function-10
prompts:
- Why is my Kyma Function not working?
assert:
- type: icontains-any
  value:
  - error
  - function
  required: true
  description: 'function_syntax_error: Must mention relevant keywords'
- type: llm-rubric
  value: 'Evaluate if the response points out that the function has a syntax error
    in its source code and provides a description of the error..


    Score 1.0 if:

    - The response clearly and accurately points out that the function has a syntax
    error in its source code and provides a description of the error.

    - All relevant information is provided


    Score 0.5 if:

    - The response mentions that the function has a syntax error in its source code
    and includes a description of the error. but not clearly

    - Some relevant information is missing


    Score 0.0 if:

    - The response does not mention that the function has a syntax error in its source
    code and include a description of the error.

    - Incorrect or misleading information

    '
  threshold: 0.7
  required: true
  description: 'function_syntax_error: Semantic validation'
- type: llm-rubric
  value: 'Evaluate if the response provides an example of how to fix the function
    javascript source code..


    Score 1.0 if:

    - The response clearly and accurately provides an example of how to fix the function
    javascript source code.

    - All relevant information is provided


    Score 0.5 if:

    - The response includes an example of how to fix the function javascript source
    code. but not clearly

    - Some relevant information is missing


    Score 0.0 if:

    - The response does not include an example of how to fix the function javascript
    source code.

    - Incorrect or misleading information

    '
  threshold: 0.7
  required: true
  description: 'function_correct_syntax: Semantic validation'
- type: javascript
  value: "// Check for numbered steps or bullet points\n            const hasNumberedSteps\
    \ = /\\d+\\.\\s/.test(output);\n            const hasBulletPoints = /^\\s*[-*]\\\
    s/m.test(output);\n            return hasNumberedSteps || hasBulletPoints;"
  required: false
  description: 'step_by_step_guide: Should contain structured steps'
- type: llm-rubric
  value: 'Evaluate if the response contains a step-by-step guide on how to fix the
    issue..


    Score 1.0 if:

    - The response clearly and accurately contains a step-by-step guide on how to
    fix the issue.

    - All relevant information is provided


    Score 0.5 if:

    - The response contains a step-by-step guide on how to fix the issue. but not
    clearly

    - Some relevant information is missing


    Score 0.0 if:

    - The response does not contains a step-by-step guide on how to fix the issue.

    - Incorrect or misleading information

    '
  threshold: 0.7
  required: false
  description: 'step_by_step_guide: Semantic validation'
- type: llm-rubric
  value: 'Evaluate if the response provides a partial javascript code for the function
    with the correct syntax..


    Score 1.0 if:

    - The response clearly and accurately provides a partial javascript code for the
    function with the correct syntax.

    - All relevant information is provided


    Score 0.5 if:

    - The response includes a partial javascript code for the function with the correct
    syntax. but not clearly

    - Some relevant information is missing


    Score 0.0 if:

    - The response does not include a partial javascript code for the function with
    the correct syntax.

    - Incorrect or misleading information

    '
  threshold: 0.7
  required: false
  description: 'partial_fix: Semantic validation'
- type: contains
  value: '```'
  required: false
  description: 'partial_yaml: Must contain code block'
- type: llm-rubric
  value: 'Evaluate if the response provides a partial yaml for the function with the
    correct syntax for its javascript source code..


    Score 1.0 if:

    - The response clearly and accurately provides a partial yaml for the function
    with the correct syntax for its javascript source code.

    - All relevant information is provided


    Score 0.5 if:

    - The response includes a partial yaml for the function with the correct syntax
    for its javascript source code. but not clearly

    - Some relevant information is missing


    Score 0.0 if:

    - The response does not include a partial yaml for the function with the correct
    syntax for its javascript source code.

    - Incorrect or misleading information

    '
  threshold: 0.7
  required: false
  description: 'partial_yaml: Semantic validation'
- type: contains
  value: '```'
  required: false
  description: 'complete_yaml: Must contain code block'
- type: llm-rubric
  value: 'Evaluate if the response provides a complete yaml for the function with
    the correct syntax for its javascript source code..


    Score 1.0 if:

    - The response clearly and accurately provides a complete yaml for the function
    with the correct syntax for its javascript source code.

    - All relevant information is provided


    Score 0.5 if:

    - The response includes a complete yaml for the function with the correct syntax
    for its javascript source code. but not clearly

    - Some relevant information is missing


    Score 0.0 if:

    - The response does not include a complete yaml for the function with the correct
    syntax for its javascript source code.

    - Incorrect or misleading information

    '
  threshold: 0.7
  required: false
  description: 'complete_yaml: Semantic validation'
metadata:
  deploy:
    script: ./data/test-cases/10_kyma_function_syntax_error/deploy.sh
  undeploy:
    script: ./data/test-cases/10_kyma_function_syntax_error/undeploy.sh
